<mat-card>
  <mat-card-title>Filter by Tags</mat-card-title>
  <mat-card-content>
    <mat-form-field appearance="fill" class="w-100 mb-3">
      <mat-label>Search tags...</mat-label>
      <input matInput type="text" [(ngModel)]="searchTerm" (input)="filterTags()">
    </mat-form-field>
    
    <div class="tag-list mb-3">
      <mat-checkbox *ngFor="let tag of filteredAvailableTags" 
                    [value]="tag" 
                    [checked]="selectedTags.has(tag)" 
                    (change)="onTagChange(tag, $event)">
        {{ tag }}
      </mat-checkbox>
      <p *ngIf="filteredAvailableTags.length === 0 && searchTerm" class="text-muted mt-2">No tags match "{{searchTerm}}".</p>
      <p *ngIf="allAvailableTags.length === 0 && !searchTerm" class="text-muted mt-2">No tags available.</p>
    </div>
    
    <div class="d-flex justify-content-center gap-2">
      <button mat-raised-button color="primary" (click)="applySelection()">Apply Tags</button>
      <button mat-button (click)="clearSelection()">Clear Tags</button>
    </div>
  </mat-card-content>
</mat-card>
